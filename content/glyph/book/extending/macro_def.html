<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
	<head>
		<title>Glyph - Defining Custom Macros</title>
		<meta name="author" content="Fabio Cevasco" />
		<meta name="copyright" content="Fabio Cevasco" />
		<meta name="robots" content="all, follow" />
		<meta name="Revisit-After" content="2 Days" />
		<meta name="language" content="en" />
		<meta name="target_country" content="en-us" />
		<meta name="country" content="United States" />
		<meta name="description" content="H3RALD - Fabio Cevasco's Web Site" />
		<meta name="keywords" content="h3rald, fabio cevasco, glyph, technical writing, html, html5, book" />
		<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
		<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
		<meta content="44.388041;9.073248" name="ICBM" />

		<link href="/css/main.css" media="all" rel="stylesheet" type="text/css" />
	</head>
	<body>
		<div id="wrapper">
			<a href="http://github.com/h3rald/h3rald"><img style="position: absolute; top: 0; right: 0; border: 0;" src="http://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" alt="Fork me on GitHub" /></a>
			<div id="header">
				<!--[if lte IE 6]>
				<div id="ie-warning">
					This site is not compatible with Internet Explorer 6 or lower. You should consider using a more modern browser for a better &ndash; and <em>safer</em> &ndash; web experience. [<a href="http://browsehappy.com/browsers/">Read More...</a>]
				</div>
				<![endif]-->
				<!-- HEADER START -->
				<div id="header-container">
					<div id="header-left">
						<h1><span class="logo"></span><a id="logo" href="/" title="H3RALD"></a></h1>
					</div>
					<div id="header-right">
						<ul id="navigation">
							<li><span class="preload nav-archives"></span><a id="nav-archives" href="/archives/" title="ARCHIVES"></a></li>
							<li><span class="preload nav-projects"></span><a id="nav-projects" href="/projects/" title="PROJECTS"></a></li>
							<li><span class="preload nav-about"></span><a id="nav-about" href="/about/" title="ABOUT"></a></li>
							<li><span class="preload nav-other"></span><a id="nav-other" href="/other/" title="OTHER"></a></li>
						</ul>
					</div>
				</div>
			</div>
			<!-- HEADER END -->
			<div class="ribbon">
			</div>
			<!-- MAIN START -->
			<div id="main">
				<!-- CONTAINER START -->
				<div id="container">
					<!-- CONTENT START -->
					<div id="content" class="clearfixstandard">
						<div id="page-links">
							<span><script type="text/javascript" src="http://w.sharethis.com/button/sharethis.js#publisher=6e34d60c-b14e-4c19-9b2f-7c35a9f0ab09&amp;type=website&amp;linkfg=%23a4282d"></script></span>
						</div>

						<h2>Defining Custom Macros</h2>
						<hr />
						<div id="content-body">
							<div class="navigation"><a href="/glyph/book/extending/internals.html">A quick look at Glyph's internals &larr;</a><a href="/glyph/book/index.html">Contents</a><a href="/glyph/book/extending/params_attrs.html">&rarr; Parameters and Attributes</a></div>
								<p>Glyph was created wih extensibility in mind. You can freely extend Glyph Language by creating or overriding macros, to do whatever you like. Macro definitions are written in pure Ruby code and placed in <code>.rb</code> files within the <code>lib/macros/</code> folder of your project.</p>
<div class="box">
<div class="box-title">Alternative Ways to Define Macros</div>
<p>You can also define macros:</p>
<ul>
	<li>inside your document, using the <a href="/glyph/book/macros/macros_core.html#m_macro_"><code>macro:</code></a> macro.</li>
	<li>Using the <a href="/glyph/book/macros/macros_core.html#m_include"><code>include</code></a> macro specifying the path to an <code>.rb</code> file containing macro definitions stored in the <code>lib/</code> directory (useful especially when <a href="/glyph/book/compiling/lite_mode.html#lite_mode">compiling single Glyph files</a>).</li>
</ul>
</div>
<p>This is the source code of a fairly simple macro used to format a note:</p>
	<pre class="lazy"><span class="line-numbers">   1 </span> macro <span class="Constant"><span class="Constant">:</span>note</span> <span class="Keyword">do</span>
<span class="line-numbers">   2 </span>   <span class="String"><span class="String">%{</span>&lt;div class=&quot;<span class="String"><span class="String">#{</span><span class="Variable"><span class="Variable">@</span>name</span><span class="String">}</span></span>&quot;&gt;&lt;span class=&quot;note-title&quot;&gt;<span class="String"><span class="String">#{</span><span class="Variable"><span class="Variable">@</span>name</span><span class="String"><span class="String">.</span><span class="Entity">to_s</span></span><span class="String"><span class="String">.</span><span class="Entity">capitalize</span></span><span class="String">}</span></span>&lt;/span&gt;</span>
<span class="line-numbers">   3 </span> <span class="String">		<span class="String"><span class="String">#{</span><span class="Variable"><span class="Variable">@</span>value</span><span class="String">}</span></span></span>
<span class="line-numbers">   4 </span> <span class="String"></span>
<span class="line-numbers">   5 </span> <span class="String">    &lt;/div&gt;<span class="String">}</span></span>
<span class="line-numbers">   6 </span> <span class="Keyword">end</span>
</pre>
	<p>The <code>macro</code> method takes a single <code>Symbol</code> or <code>String</code> parameter, corresponding to the name of the macro. In this case, the entire block (or <em>body</em> of the macro) is a <code>String</code> corresponding to what we want the macro to evaluate to: a <code>&lt;div&gt;</code> tag containing a note.</p>
<p>The body of the macro is evaluated in the context of the <a href="http://yardoc.org/docs/h3rald-glyph/Glyph/Macro"><code>Glyph::Macro</code></a> class, therefore its instance variables (like <code>@name</code> or <code>@value</code>) can be used directly.</p>
<div class="box">
<div class="box-title">Why using <code>@name</code> instead of just &#8220;note&#8221;?</div>
<p>For the <code>note</code> macro, it absolutely makes no difference. However, by using <code>@name</code> it is possible to re-use the same code for the <code>tip</code>, <code>important</code> and <code>caution</code> macros as well, which are in fact only aliases of the <code>note</code> macro.</p>
</div>
<p>The following table lists all the instance variables that can be used inside macros:</p>
	<table><tr><th>Variable</th>
    	<th>Description</th></tr>
  	<tr><td>
<code>@node</code>
</td>
    	<td><p>A <a href="http://yardoc.org/docs/h3rald-glyph/Glyph/MacroNode"><code>Glyph::MacroNode</code></a> containing information about the macro. Useful for accessing parent and child macros, and the current <a href="http://yardoc.org/docs/h3rald-glyph/Glyph/Document"><code>Glyph::Document</code></a>. Normally, instances of the <code>MacroNode</code> class contain the following keys:</p>
<ul>
	<li><code>:name</code>, the name of the macro.</li>
	<li><code>:source</code>, a <code>String</code> identifying the source of the macro (a file, a snippet, etc.)</li>
	<li><code>:value</code>, the value of the macro (populated after the document has been parsed and analyzed).</li>
	<li><code>:escape</code>, whether the macro is a <a href="/glyph/book/text_editing/esc_quot.html#esc_quot">quoting macro</a> or not.</li>
	<li><code>:document</code>, the instance of <code>Document</code> the macro is contained in (populated after the document has been parsed and analyzed).</li>
</ul>
<p>Note that the first two keys can also be accessed via instance variables.</p></td></tr>
  	<tr><td>
<code>@name</code>
</td>
    	<td>The name of the macro.</td></tr>
  	<tr><td>
<code>@source</code>
</td>
    <td>A <code>String</code> identifying the source of the macro (a file, a snippet, etc.).</td></tr></table>
							<div class="navigation"><a href="/glyph/book/extending/internals.html">A quick look at Glyph's internals &larr;</a><a href="/glyph/book/index.html">Contents</a><a href="/glyph/book/extending/params_attrs.html">&rarr; Parameters and Attributes</a></div>
						</div>
						<div id="content-footer">
							<div class="share">
								<script type="text/javascript"><!--
									google_ad_client = "pub-2871497824158668";
									/* 728x90, h3rald 8.0 */
									google_ad_slot = "0081634732";
									google_ad_width = 728;
									google_ad_height = 90;
									//-->
									</script>
									<script type="text/javascript"
										src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
										</script>
									</div>
								</div>
							</div>
							<!-- CONTENT END -->
						</div>
						<!-- CONTAINER END -->
					</div>
					<div class="ribbon"></div>
					<!-- MAIN END -->
					<div id="border-bottom">
						<div id="services">
							<div class ="footer-left">
								<div id="backtype">
									<h3><span class="s-opinions preload"></span><a id="s-opinions" href="http://www.backtype.com/h3rald" title="Opinions"></a></h3>
								</div>
							</div>
							<div class ="footer-center">
								<div id="twitter">
									<h3><span class="s-tweets preload"></span><a id="s-tweets" href="http://www.twitter.com/h3rald" title="Tweets"></a></h3>
								</div>
							</div>
							<div class ="footer-right">
								<div id="delicious">
									<h3><span class="s-bookmarks preload"></span><a id="s-bookmarks" href="http://www.delicious.com/h3rald" title="Bookmarks"></a></h3>
								</div>
							</div>
						</div> <!-- SERVICES END -->
					</div>
					<div class="clearfooter"></div>
				</div> <!-- WRAPPER END -->
				<div id="footer">
					<div id="footer-container">
						<div class="footer-div">
							H3RALD Web Site v8.0.0 <em>"xStatic"</em> &mdash; &copy; 2004-2010 <strong>Fabio Cevasco</strong> &mdash; <a class="link" href="http://creativecommons.org/licenses/by-nc-nd/3.0/us/">Some rights reserved</a> | <a href="http://validator.w3.org/check?uri=referer" class="link">XHTML 1.1</a> | <a href="http://jigsaw.w3.org/css-validator/validator?uri=/macro_def.html" class="link">CSS 2.1</a>
						</div>
					</div> <!-- END FOOTER CONTAINER-->
				</div> <!-- END FOOTER -->
				<!-- Start of StatCounter Code -->
				<script type="text/javascript">
					var sc_project=6193656; 
					var sc_invisible=1; 
					var sc_security="57f7ee2a"; 
				</script>
				<script type="text/javascript" src="http://www.statcounter.com/counter/counter_xhtml.js"></script>
				<!-- End of StatCounter Code -->
				<script src='http://www.google-analytics.com/ga.js' type='text/javascript'></script>	
				<script src="http://www.google.com/jsapi?key=ABQIAAAA6h3j8Jri5D_da53UPbEbThRlq2n1sm52B5HDRR5tm6o8XM18FhTKn3v155RpPeD0kWnWG81QEhhifQ" type="text/javascript"></script>
				<script src="http://www.google.com/jsapi?key=ABQIAAAA6h3j8Jri5D_da53UPbEbThRlq2n1sm52B5HDRR5tm6o8XM18FhTKn3v155RpPeD0kWnWG81QEhhifQ" type="text/javascript"></script>
					<script src="/js/jquery.js" type="text/javascript"></script> 
					<script src="/js/jquery-timeago.js" type="text/javascript"></script> 
					<script src="/js/jquery-easing.js" type="text/javascript"></script> 
					<script src="/js/jquery-fancybox.js" type="text/javascript"></script> 
					<script src="/js/jquery-toc.js" type="text/javascript"></script> 
					<script src="/js/date.js" type="text/javascript"></script> 
					<script src="/js/feeds.js" type="text/javascript"></script> 
					<script src="/js/search.js" type="text/javascript"></script> 
					<script src="/js/init.js" type="text/javascript"></script> 
				
				
					<script type="text/javascript"> 
						$(document).ready(function() {
								display_opinions(7);
								display_tweets(7);
								display_bookmarks(7);
								});
					</script> 
			</body>
		</html>