<!DOCTYPE html> 
<html lang="en"> 
	<head> 
		<title>Glyph - Defining Custom Macros</title> 



		<meta charset="utf-8" /> 
		<meta name="author" content="Fabio Cevasco" /> 
		<meta name="copyright" content="Fabio Cevasco" /> 
		<meta name="robots" content="all, follow" /> 
		<meta name="Revisit-After" content="2 Days" /> 
		<meta name="language" content="en" /> 
		<meta name="target_country" content="en-us" /> 
		<meta name="country" content="United States" /> 
		<meta name="description" content="H3RALD - Fabio Cevasco's Web Site" /> 

		<meta name="keywords" content="h3rald, fabio cevasco, glyph" /> 
		<link rel="shortcut icon" href="/favicon.png" type="image/png" /> 
		<meta content="44.388041;9.073248" name="ICBM" /> 


		<link rel="stylesheet" type="text/css" href="/styles/html5reset.css" /> 
		<link rel="stylesheet" type="text/css" href="/styles/style.css" /> 

		<!--[if lte IE 8]>
		<script src="/js/html5.js" type="text/javascript"></script>
		<![endif]--> 
	</head> 
	<body> 
		<!--[if lte IE 6]>
		<div id="ie-warning">
			This site is not compatible with Internet Explorer 6 or lower. You should consider using a more modern browser for a better &ndash; and <em>safer</em> &ndash; web experience. [<a href="http://browsehappy.com/browsers/">Read More &raquo;</a>]
		</div>
		<![endif]--> 

		<section id="container"> 

			<header class="page"> 
				<nav class="home-link"> 
					<a href="/"> 
						<img src="/images/h3rald_small.png" alt="H3RALD" class="default"/> 
						<![if !IE]> 
						<img src="/images/h3rald_hover_small.png" alt="H3RALD" class="hover"/> 
						<![endif]> 
					</a> 
				</nav> 

				<nav class="section"> 
					/<a href="/projects/" rel="archives">PROJECTS</a> 
				</nav> 

			</header> 
			<article class="page"> 
				<header> 
					<hgroup> 
					<h1>Defining Custom Macros</h1> 
					</hgroup> 
				</header> 
				<section id="body-text" class="hyphenate"> 

							<nav><a href="/glyph/book/extending/internals.html">A quick look at Glyph's internals &larr;</a><a href="/glyph/book/index.html">Contents</a><a href="/glyph/book/extending/params_attrs.html">&rarr; Parameters and Attributes</a></nav>
								<p>Glyph was created wih extensibility in mind. You can freely extend Glyph Language by creating or overriding macros, to do whatever you like. Macro definitions are written in pure Ruby code and placed in <code>.rb</code> files within the <code>lib/macros/</code> folder of your project.</p>
<aside class="box">
<div class="box-title">Alternative Ways to Define Macros</div>
<p>You can also define macros:</p>
<ul>
	<li>inside your document, using the <a href="/glyph/book/macros/macros_core.html#m_macro_"><code>macro:</code></a> macro.</li>
	<li>Using the <a href="/glyph/book/macros/macros_core.html#m_include"><code>include</code></a> macro specifying the path to an <code>.rb</code> file containing macro definitions stored in the <code>lib/</code> directory (useful especially when <a href="/glyph/book/compiling/lite_mode.html#lite_mode">compiling single Glyph files</a>).</li>
</ul>
</aside>
<p>This is the source code of a fairly simple macro used to format a note:</p>
	<div class="CodeRay">
  <div class="code"><pre><span class="no">1</span> macro <span class="sy">:note</span> <span class="r">do</span>
<span class="no">2</span>   <span class="s"><span class="dl">%{</span><span class="k">&lt;div class=&quot;</span><span class="il"><span class="idl">#{</span><span class="iv">@name</span><span class="idl">}</span></span><span class="k">&quot;&gt;&lt;span class=&quot;note-title&quot;&gt;</span><span class="il"><span class="idl">#{</span><span class="iv">@name</span>.to_s.capitalize<span class="idl">}</span></span><span class="k">&lt;/span&gt;
<span class="no">3</span>     </span><span class="il"><span class="idl">#{</span><span class="iv">@value</span><span class="idl">}</span></span><span class="k">
<span class="no">4</span> 
<span class="no">5</span>     &lt;/div&gt;</span><span class="dl">}</span></span>
<span class="no">6</span> <span class="r">end</span></pre></div>
</div>

	<p>The <code>macro</code> method takes a single <code>Symbol</code> or <code>String</code> parameter, corresponding to the name of the macro. In this case, the entire block (or <em>body</em> of the macro) is a <code>String</code> corresponding to what we want the macro to evaluate to: a <code>&lt;div&gt;</code> tag containing a note.</p>
<p>The body of the macro is evaluated in the context of the <a href="http://yardoc.org/docs/h3rald-glyph/Glyph/Macro"><code>Glyph::Macro</code></a> class, therefore its instance variables (like <code>@name</code> or <code>@value</code>) can be used directly.</p>
<aside class="box">
<div class="box-title">Why using <code>@name</code> instead of just &#8220;note&#8221;?</div>
<p>For the <code>note</code> macro, it absolutely makes no difference. However, by using <code>@name</code> it is possible to re-use the same code for the <code>tip</code>, <code>important</code> and <code>caution</code> macros as well, which are in fact only aliases of the <code>note</code> macro.</p>
</aside>
<p>The following table lists all the instance variables that can be used inside macros:</p>
	<table><tr><th>Variable</th>
    	<th>Description</th></tr>
  	<tr><td>
<code>@node</code>
</td>
    	<td><p>A <a href="http://yardoc.org/docs/h3rald-glyph/Glyph/MacroNode"><code>Glyph::MacroNode</code></a> containing information about the macro. Useful for accessing parent and child macros, and the current <a href="http://yardoc.org/docs/h3rald-glyph/Glyph/Document"><code>Glyph::Document</code></a>. Normally, instances of the <code>MacroNode</code> class contain the following keys:</p>
<ul>
	<li><code>:name</code>, the name of the macro.</li>
	<li><code>:source</code>, a <code>String</code> identifying the source of the macro (a file, a snippet, etc.)</li>
	<li><code>:value</code>, the value of the macro (populated after the document has been parsed and analyzed).</li>
	<li><code>:escape</code>, whether the macro is a <a href="/glyph/book/text_editing/esc_quot.html#esc_quot">quoting macro</a> or not.</li>
	<li><code>:document</code>, the instance of <code>Document</code> the macro is contained in (populated after the document has been parsed and analyzed).</li>
</ul>
<p>Note that the first two keys can also be accessed via instance variables.</p></td></tr>
  	<tr><td>
<code>@name</code>
</td>
    	<td>The name of the macro.</td></tr>
  	<tr><td>
<code>@source</code>
</td>
    <td>A <code>String</code> identifying the source of the macro (a file, a snippet, etc.).</td></tr></table>
							<nav><a href="/glyph/book/extending/internals.html">A quick look at Glyph's internals &larr;</a><a href="/glyph/book/index.html">Contents</a><a href="/glyph/book/extending/params_attrs.html">&rarr; Parameters and Attributes</a></nav>
				</section> 
			</article> 


			<footer> 
				<section class="ads"> 
					<script type="text/javascript"><!--
						google_ad_client = "pub-2871497824158668";
						/* 728x90, created 9/10/10 */
						google_ad_slot = "3963343166";
						google_ad_width = 728;
						google_ad_height = 90;
						//-->
					</script> 
					<script type="text/javascript" src="http://pagead2.googlesyndication.com/pagead/show_ads.js"> 
					</script> 
				</section> 
				<section> 
					<nav> 
						<a href="/about/">ABOUT</a>|<a href="/contact/">CONTACT</a> 
					</nav> 
					<p>H3RALD Web Site v8.1 &mdash; &copy; 2010 &mdash; <em>Fabio Cevasco</em></p> 
				</section> 
			</footer> 
		</section><!-- #container end --> 
		<script src="http://www.google.com/jsapi?key=ABQIAAAAr6RY1Z6dchG_sX9WDLSy3xRlq2n1sm52B5HDRR5tm6o8XM18FhR56xHNNH6CsX86uN5VoTrglpyOyQ" type="text/javascript"></script> 
		<!-- <script src="/js/jquery.js" type="text/javascript"></script> --> 
		<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script> 
		<script src="/js/jquery-timeago.js" type="text/javascript"></script> 
		<script src="/js/jquery-easing.js" type="text/javascript"></script> 
		<script src="/js/jquery-fancybox.js" type="text/javascript"></script> 
		<script src="/js/jquery-toc.js" type="text/javascript"></script> 
		<script src="/js/date.js" type="text/javascript"></script> 
		<script src="/js/feeds.js" type="text/javascript"></script> 
		<script src="/js/search.js" type="text/javascript"></script> 
		<script src="/js/hyphenator.min.js" type="text/javascript"></script> 
		<script src="/js/init.js" type="text/javascript"></script> 
		<!-- Start Google Analytics --> 
		<script type="text/javascript"> 
			var _gaq = _gaq || [];
			_gaq.push(['_setAccount', 'UA-18587377-1']);
			_gaq.push(['_trackPageview']);

			(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
			})();
		</script> 
		<!-- End Google Analytics --> 
		<!-- Start of StatCounter Code --> 
		<script type="text/javascript"> 
			var sc_project=6193656; 
			var sc_invisible=1; 
			var sc_security="57f7ee2a"; 
		</script> 
		<script type="text/javascript" src="http://www.statcounter.com/counter/counter_xhtml.js"></script> 
		<!-- End of StatCounter Code --> 
	</body> 
</html>