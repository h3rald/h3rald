<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
	<head>
<title>Glyph</title>
<meta name="author" content="Fabio Cevasco" />

<meta name="copyright" content="Fabio Cevasco" />
<meta name="generator" content="Glyph v0.4.0 (http://www.h3rald.com/glyph)" />
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<title>Interpreting Glyph Code - Glyph</title>
		<meta name="author" content="Fabio Cevasco" />
		<meta name="copyright" content="Fabio Cevasco" />
		<meta name="robots" content="all, follow" />
		<meta name="Revisit-After" content="2 Days" />
		<meta name="language" content="en" />
		<meta name="target_country" content="en-us" />
		<meta name="country" content="United States" />
		<meta name="description" content="H3RALD - Fabio Cevasco's Web Site" />
		<meta name="keywords" content="h3rald, fabio cevasco, glyph, technical writing, html, html5, book" />
		<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
		<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
		<meta content="44.388041;9.073248" name="ICBM" />

		<link href="/css/main.css" media="all" rel="stylesheet" type="text/css" />
		<link href="/glyph/book/styles/default.css" rel="stylesheet" type="text/css" />
</head>

	<body>
		<div id="wrapper">
			<a href="http://github.com/h3rald/h3rald"><img style="position: absolute; top: 0; right: 0; border: 0;" src="http://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" alt="Fork me on GitHub" /></a>
			<div id="header">
				<!--[if lte IE 6]>
				<div id="ie-warning">
					This site is not compatible with Internet Explorer 6 or lower. You should consider using a more modern browser for a better &ndash; and <em>safer</em> &ndash; web experience. [<a href="http://browsehappy.com/browsers/">Read More...</a>]
				</div>
				<![endif]-->
				<!-- HEADER START -->
				<div id="header-container">
					<div id="header-left">
						<h1><span class="logo"></span><a id="logo" href="/" title="H3RALD"></a></h1>
					</div>
					<div id="header-right">
						<ul id="navigation">
							<li><span class="preload nav-archives"></span><a id="nav-archives" href="/archives/" title="ARCHIVES"></a></li>
							<li><span class="preload nav-projects"></span><a id="nav-projects" href="/projects/" title="PROJECTS"></a></li>
							<li><span class="preload nav-about"></span><a id="nav-about" href="/about/" title="ABOUT"></a></li>
							<li><span class="preload nav-other"></span><a id="nav-other" href="/other/" title="OTHER"></a></li>
						</ul>
					</div>
				</div>
			</div>
			<!-- HEADER END -->
			<div class="ribbon">
			</div>
			<!-- MAIN START -->
			<div id="main">
				<!-- CONTAINER START -->
				<div id="container">
					<!-- CONTENT START -->
					<div id="content" class="clearfixstandard">
						<div id="page-links">
							<span><script type="text/javascript" src="http://w.sharethis.com/button/sharethis.js#publisher=6e34d60c-b14e-4c19-9b2f-7c35a9f0ab09&amp;type=website&amp;linkfg=%23a4282d"></script></span>
						</div>

						<h2>Interpreting Glyph Code</h2>
						<hr />
						<div id="content-body">
							<div class="navigation"><a href="/glyph/book/extending/validators.html">Using Validators &larr;</a><a href="/glyph/book/index.html">Contents</a><a href="/glyph/book/extending/layouts.html">&rarr; Layouts</a></div>
							
	<p>What if you need to evaluate some Glyph code <em>within</em> a macro? Say for example you want to transform a parameter in a link, and you want to make sure that link gets validated exactly like the others, in this case, you can use the <code>interpret</code> method, as follows:</p>

	<pre class="lazy"><span class="line-numbers">   1 </span> macro <span class="Constant"><span class="Constant">:</span>fmi</span> <span class="Keyword">do</span>
<span class="line-numbers">   2 </span>   topic, href <span class="Keyword">=</span> <span class="Variable"><span class="Variable">@</span>params</span>
<span class="line-numbers">   3 </span>   link <span class="Keyword">=</span> placeholder <span class="Keyword">do </span>|<span class="Variable">document</span>| 
<span class="line-numbers">   4 </span>     interpret <span class="String"><span class="String">&quot;</span>link[<span class="String"><span class="String">#{</span>href<span class="String">}</span></span>]<span class="String">&quot;</span></span>
<span class="line-numbers">   5 </span>   <span class="Keyword">end</span>
<span class="line-numbers">   6 </span>   <span class="String"><span class="String">%{</span>&lt;span class=&quot;fmi&quot;&gt;for more information on <span class="String"><span class="String">#{</span>topic<span class="String">}</span></span>, see <span class="String"><span class="String">#{</span>link<span class="String">}</span></span>&lt;/span&gt;<span class="String">}</span></span>
<span class="line-numbers">   7 </span> <span class="Keyword">end</span>
</pre> 

	<p>When the <code>interpret</code> method is called, the following happens:</p>
<ol>
	<li>A new Glyph document is created from the <code>String</code> passed to the method.</li>
	<li>The bookmarks, headers and placeholders are passed from the main document to the new one. Because they are stored in arrays and hashes, they are passed by reference, so for example any new bookmark stored in the new document will also become available in the main document.</li>
	<li>Any macro included in the <code>String</code> is evaluated, and the resulting text is returned by the method. Note that this new document does not get finalized: in other words, placeholders will be left as they are, and they&#8217;ll eventually be replaced when <em>the main document</em> is finalized.</li>
</ol>

	<div class="section">
<h5 id="rewriting">Rewriting</h5>
<p>While the <code>interpret</code> method is useful to evaluate Glyph code in a macro while performing other actions (storing a bookmark, checking for the presence of an anchor, etc.), in some cases it may not be necessary. If you simply want your macro to be converted into existing Glyph macro without performing any action excepting parameter substitution, you can just use the <a href="/glyph/book/macros/macros_core.html#m_rewrite_"><code>rewrite:</code></a> macro within youy Glyph document</p>
		<p>Consider the following macro definition:</p>
		<pre class="lazy"><span class="line-numbers">   1 </span> macro <span class="Constant"><span class="Constant">:</span>issue</span> <span class="Keyword">do</span>
<span class="line-numbers">   2 </span>   interpret <span class="String"><span class="String">%{</span></span>
<span class="line-numbers">   3 </span> <span class="String">    tr[</span>
<span class="line-numbers">   4 </span> <span class="String">      td[.=&gt;[http://github.com/h3rald/glyph/issues/closed#issue/<span class="String"><span class="String">#{</span>param<span class="String">[</span><span class="Constant">0</span><span class="String">]</span><span class="String">}</span></span>|#<span class="String"><span class="String">#{</span><span class="String"><span class="Entity">param</span></span><span class="String">(</span><span class="Constant">0</span><span class="String">)</span><span class="String">}</span></span>]]</span>
<span class="line-numbers">   5 </span> <span class="String">      td[txt[<span class="String"><span class="String">#{</span><span class="String"><span class="Entity">param</span></span><span class="String">(</span><span class="Constant">1</span><span class="String">)</span><span class="String">}</span></span>]]</span>
<span class="line-numbers">   6 </span> <span class="String">    ]</span>
<span class="line-numbers">   7 </span> <span class="String">  <span class="String">}</span></span>
<span class="line-numbers">   8 </span> <span class="Keyword">end</span>
</pre>
		<p>The <code>issue</code> macro is only rewriting existing Glyph code around the two parameters provided. In this case, it is possible to do exactly the same thing using the <a href="/glyph/book/macros/macros_core.html#m_rewrite_"><code>rewrite:</code></a> macro:</p>
		<pre class="lazy"><span class="line-numbers">   1 </span> rewrite:[issue|
<span class="line-numbers">   2 </span>   tr[
<span class="line-numbers">   3 </span>     td[.=&gt;[http://github.com/h3rald/glyph/issues/closed#issue/{{0}}|#{{0}}]]
<span class="line-numbers">   4 </span>     td[txt[{{1}}]]
<span class="line-numbers">   5 </span>   ]
<span class="line-numbers">   6 </span> ]
</pre>
		<p>Within the <a href="/glyph/book/macros/macros_core.html#m_rewrite_"><code>rewrite:</code></a> macro, it is possible to use a special syntax to call the <code>raw_attr</code> or <code>raw_param</code> methods: <br />
			<code>{{</code><em>parameter_number</em> or <em>attribute_name</em><code>}}</code></p>

</div>
							<div class="navigation"><a href="/glyph/book/extending/validators.html">Using Validators &larr;</a><a href="/glyph/book/index.html">Contents</a><a href="/glyph/book/extending/layouts.html">&rarr; Layouts</a></div>
						</div>
						<div id="content-footer">
							<div class="share">
								<script type="text/javascript"><!--
									google_ad_client = "pub-2871497824158668";
									/* 728x90, h3rald 8.0 */
									google_ad_slot = "0081634732";
									google_ad_width = 728;
									google_ad_height = 90;
									//-->
									</script>
									<script type="text/javascript"
										src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
										</script>
									</div>
								</div>
							</div>
							<!-- CONTENT END -->
						</div>
						<!-- CONTAINER END -->
					</div>
					<div class="ribbon"></div>
					<!-- MAIN END -->
					<div id="border-bottom">
						<div id="services">
							<div class ="footer-left">
								<div id="backtype">
									<h3><span class="s-opinions preload"></span><a id="s-opinions" href="http://www.backtype.com/h3rald" title="Opinions"></a></h3>
								</div>
							</div>
							<div class ="footer-center">
								<div id="twitter">
									<h3><span class="s-tweets preload"></span><a id="s-tweets" href="http://www.twitter.com/h3rald" title="Tweets"></a></h3>
								</div>
							</div>
							<div class ="footer-right">
								<div id="delicious">
									<h3><span class="s-bookmarks preload"></span><a id="s-bookmarks" href="http://www.delicious.com/h3rald" title="Bookmarks"></a></h3>
								</div>
							</div>
						</div> <!-- SERVICES END -->
					</div>
					<div class="clearfooter"></div>
				</div> <!-- WRAPPER END -->
				<div id="footer">
					<div id="footer-container">
						<div class="footer-div">
							H3RALD Web Site v8.0.0 <em>"xStatic"</em> &mdash; &copy; 2004-2010 <strong>Fabio Cevasco</strong> &mdash; <a class="link" href="http://creativecommons.org/licenses/by-nc-nd/3.0/us/">Some rights reserved</a> | <a href="http://validator.w3.org/check?uri=referer" class="link">XHTML 1.1</a> | <a href="http://jigsaw.w3.org/css-validator/validator?uri=/interpreting.html" class="link">CSS 2.1</a>
						</div>
					</div> <!-- END FOOTER CONTAINER-->
				</div> <!-- END FOOTER -->
				<!-- Start of StatCounter Code -->
				<script type="text/javascript">
					var sc_project=6193656; 
					var sc_invisible=1; 
					var sc_security="57f7ee2a"; 
				</script>
				<script type="text/javascript" src="http://www.statcounter.com/counter/counter_xhtml.js"></script>
				<!-- End of StatCounter Code -->
				<script src='http://www.google-analytics.com/ga.js' type='text/javascript'></script>	
				<script src="http://www.google.com/jsapi?key=ABQIAAAA6h3j8Jri5D_da53UPbEbThRlq2n1sm52B5HDRR5tm6o8XM18FhTKn3v155RpPeD0kWnWG81QEhhifQ" type="text/javascript"></script>
				<script src="http://www.google.com/jsapi?key=ABQIAAAA6h3j8Jri5D_da53UPbEbThRlq2n1sm52B5HDRR5tm6o8XM18FhTKn3v155RpPeD0kWnWG81QEhhifQ" type="text/javascript"></script>
					<script src="/js/jquery.js" type="text/javascript"></script> 
					<script src="/js/jquery-timeago.js" type="text/javascript"></script> 
					<script src="/js/jquery-easing.js" type="text/javascript"></script> 
					<script src="/js/jquery-fancybox.js" type="text/javascript"></script> 
					<script src="/js/jquery-toc.js" type="text/javascript"></script> 
					<script src="/js/date.js" type="text/javascript"></script> 
					<script src="/js/feeds.js" type="text/javascript"></script> 
					<script src="/js/search.js" type="text/javascript"></script> 
					<script src="/js/init.js" type="text/javascript"></script> 
				
				
					<script type="text/javascript"> 
						$(document).ready(function() {
								display_opinions(7);
								display_tweets(7);
								display_bookmarks(7);
								});
					</script> 
			</body>
		</html>